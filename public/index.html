<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OPEDRIN ADSS</title>
  <link rel="stylesheet" href="/styles.css?v=20260211_20" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.js"></script>
</head>
<body>
  <div class="app">
    <main class="content">
      <section class="card" id="authCard">
        <div class="card-header">
          <div class="logo-ring logo-ring-lg">
            <img class="auth-logo" src="/logo.png" alt="OPEDRINADSS" />
          </div>
        </div>

        <div class="tabs" style="margin: 12px 16px 0 16px;">
          <button class="tab active" id="authTabLogin" type="button">Entrar</button>
        </div>

        <div id="authPanelLogin">
          <div class="grid2">
            <div class="field">
              <label>Email</label>
              <input id="authEmail" type="email" placeholder="seuemail@exemplo.com" autocomplete="email" />
            </div>
            <div class="field">
              <label>Senha</label>
              <input id="authPassword" type="password" placeholder="Sua senha" autocomplete="current-password" />
            </div>
          </div>

          <div class="field">
            <button class="btn btn-primary" id="loginBtn" type="button" style="width: fit-content;">Entrar</button>
          </div>
        </div>

        <div class="alert" id="authAlert" style="display:none;"></div>
      </section>

      <section class="dashboard" id="dashboard" style="display:none;">
        <div class="mobile-topbar" id="mobileTopbar">
          <button class="btn btn-ghost" id="mobileMenuBtn" type="button" aria-label="Menu"><i class="fa-solid fa-bars"></i></button>
          <div class="mobile-topbar-title" id="mobileTopbarTitle">OPEDRIN ADSS</div>
          <div style="width:40px;"></div>
        </div>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        <div class="layout">
          <aside class="sidebar">
            <div class="sidebar-top">
              <div class="logo-ring">
                <img class="sidebar-logo" src="/logo.png" alt="OPEDRINADSS" />
              </div>

              <div class="row" style="justify-content: center; padding-top: 10px;">
                <button class="btn btn-ghost" id="themeToggleBtn" type="button">Tema: Moderno</button>
              </div>
              <div class="sidebar-user" id="userPill" style="display:none;">
                <div class="sidebar-user-row">
                  <div class="user-avatar" id="userAvatar"></div>
                  <span class="dot"></span>
                  <span class="greeting" id="greeting" style="display:none;">
                    <i class="fa-solid fa-hand" id="waveHand" aria-hidden="true"></i>
                    <span id="greetingText"></span>
                    <span id="greetingName" class="greeting-name"></span>
                  </span>
                </div>
                <div class="sidebar-username" id="userLabel"></div>
              </div>
            </div>

            <nav class="side-nav">
              <button class="nav-item active" data-page="opscenter" type="button">
                <i class="fa-solid fa-coins"></i>
                <span class="nav-item-text">
                  <span class="nav-item-title">Centro de Operações</span>
                  <span class="nav-item-desc">Operações • Gráficos • Ranking</span>
                </span>
              </button>
              <button class="nav-item" data-page="central" type="button">
                <i class="fa-solid fa-link"></i>
                <span class="nav-item-text">
                  <span class="nav-item-title">Central</span>
                  <span class="nav-item-desc">Criativos • Proxy • Gerador de dados</span>
                </span>
              </button>
              <button class="nav-item" data-page="expenses" type="button">
                <i class="fa-solid fa-wallet"></i>
                <span class="nav-item-text">
                  <span class="nav-item-title">Gastos</span>
                  <span class="nav-item-desc">Categorias • Filtros • Exportação</span>
                </span>
              </button>
              <button class="nav-item" data-page="profile" type="button">
                <i class="fa-solid fa-user"></i>
                <span class="nav-item-text">
                  <span class="nav-item-title">Perfil</span>
                  <span class="nav-item-desc">Configurações • Avatar</span>
                </span>
              </button>
              <button class="nav-item" data-page="admin" type="button" id="adminTab" style="display:none;">
                <i class="fa-solid fa-shield"></i>
                <span class="nav-item-text">
                  <span class="nav-item-title">Admin</span>
                  <span class="nav-item-desc">Gerenciar usuários</span>
                </span>
              </button>
            </nav>
          </aside>

          <section class="main">

        <section class="tabpanel" id="tab-ops-center">
          <div class="card">
            <div class="card-header">
              <h2>Centro de Operações</h2>
              <p>Painel completo: Operações • Gráficos • Ranking</p>
            </div>

            <div class="ops-center-subnav" id="opsCenterSubnav" style="padding: 0 16px 12px 16px;">
              <button class="btn btn-ghost active" type="button" data-ops-center="charts">Gráficos</button>
              <button class="btn btn-ghost" type="button" data-ops-center="ops">Operações</button>
              <button class="btn btn-ghost" type="button" data-ops-center="ranking">Ranking</button>
            </div>

            <div class="ops-center-panels" id="opsCenterPanels" style="padding: 0 16px 16px 16px;"></div>
          </div>
        </section>

        <section class="tabpanel" id="tab-ops" style="display:none;">
          <div class="ops-hero">
            <div>
              <div class="ops-hero-title">Controle Diário</div>
              <div class="ops-hero-sub">Gerencie suas operações diárias</div>
            </div>
            <div class="ops-hero-right">
              <div class="ops-hero-total">
                <div class="muted">Lucro do período</div>
                <div class="ops-hero-total-value" id="opsPeriodTotal">R$ 0,00</div>
              </div>
              <div class="row" style="gap: 10px;">
                <button class="btn btn-primary" id="opsAddBtn" type="button">Adicionar operação</button>
              </div>
            </div>
          </div>

          <div class="ops-kpis" id="opsKpis">
            <div class="ops-kpi">
              <div class="muted">Total de operações</div>
              <div class="kpi-value" id="opsKpiCount">0</div>
            </div>
            <div class="ops-kpi">
              <div class="muted">Lucro</div>
              <div class="kpi-value" id="opsKpiProfit">R$ 0,00</div>
            </div>
            <div class="ops-kpi">
              <div class="muted">Gastos</div>
              <div class="kpi-value" id="opsKpiCost">R$ 0,00</div>
            </div>
            <div class="ops-kpi">
              <div class="muted">Resultado</div>
              <div class="kpi-value" id="opsKpiResult">R$ 0,00</div>
            </div>
          </div>

          <div class="card" id="opsFormCard">
            <div class="card-header">
              <h2>Adicionar / Editar Operação</h2>
              <p>Lucro - Gasto Operacional = Resultado</p>
            </div>

            <div class="grid3">
              <div class="field">
                <label>Data</label>
                <input id="opDate" type="date" />
              </div>
              <div class="field">
                <label>Lucro (R$)</label>
                <input id="opProfit" type="number" step="0.01" placeholder="0.00" />
              </div>
              <div class="field">
                <label>Gasto Operacional (R$)</label>
                <input id="opCost" type="number" step="0.01" placeholder="0.00" />
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label>Resultado (R$)</label>
                <input id="opResult" type="text" disabled />
              </div>
              <div class="field">
                <label>Observação</label>
                <input id="opNote" type="text" placeholder="Opcional" />
              </div>
            </div>

            <div class="row space">
              <div class="row">
                <button class="btn btn-primary" id="saveOpBtn" type="button">Salvar</button>
                <button class="btn btn-ghost" id="clearOpBtn" type="button">Limpar</button>
                <input id="editingId" type="hidden" />
              </div>
              <div class="muted" id="dupHint"></div>
            </div>

            <div class="alert" id="opAlert" style="display:none;"></div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="row space" style="align-items: flex-end;">
                <div>
                  <h2>Operações</h2>
                  <p>Editar e excluir operações</p>
                </div>
                <div class="row" style="align-items: flex-end; gap: 10px; flex-wrap: wrap;">
                  <div class="field" id="opsAdminControls" style="padding:0; min-width: 240px; display:none;">
                    <label>Admin</label>
                    <div class="row" style="gap:10px; align-items:center; flex-wrap: wrap;">
                      <label class="row" style="gap:8px;">
                        <input id="opsAdminMode" type="checkbox" />
                        <span class="muted">Editar operações de outro usuário</span>
                      </label>
                      <select id="opsAdminUser" class="select" style="min-width: 220px;"></select>
                    </div>
                  </div>
                  <div class="field" style="padding:0; min-width: 120px;">
                    <label>Ano</label>
                    <select id="opsYear" class="select"></select>
                  </div>
                  <div class="field" style="padding:0; min-width: 160px;">
                    <label>Mês</label>
                    <select id="opsMonth" class="select"></select>
                  </div>
                  <div class="field" style="padding:0; min-width: 160px;">
                    <label>Dia</label>
                    <select id="opsDay" class="select"></select>
                  </div>
                  <div class="field" style="padding:0;">
                    <label>&nbsp;</label>
                    <button class="btn btn-secondary" id="applyFilterBtn" type="button">Aplicar</button>
                  </div>
                  <input id="filterFrom" type="date" style="display:none;" />
                  <input id="filterTo" type="date" style="display:none;" />
                </div>
                <div class="kpi" id="opsTotalKpi">
                  <div class="muted">Lucro total</div>
                  <div class="kpi-value" id="opsTotalResult">R$ 0,00</div>
                </div>
              </div>
            </div>
            <div class="table" id="opsTable"></div>
          </div>
        </section>

        <section class="tabpanel" id="tab-charts" style="display:none;">
          <div class="card">
            <div class="card-header">
              <h2>Gráficos</h2>
              <p>Lucro x Gastos + Resultado, com filtros por período</p>
            </div>

            <div class="grid3">
              <div class="field">
                <label>Modelo</label>
                <select id="chartMode" class="select">
                  <option value="combo">Combo (Barras + Linha)</option>
                  <option value="lines">Linhas (3 linhas)</option>
                  <option value="stacked">Barras Empilhadas</option>
                </select>
              </div>
              <div class="field">
                <label>&nbsp;</label>
                <button class="btn btn-secondary" id="saveChartModeBtn" type="button">Salvar Modelo</button>
              </div>
              <div class="field">
                <label>&nbsp;</label>
                <div class="muted" id="chartModeHint"></div>
              </div>
            </div>

            <div class="row space" style="align-items: flex-end; padding: 0 16px 10px 16px;">
              <div class="row" style="align-items: flex-end; gap: 10px;">
                <div class="field" style="padding:0; min-width: 180px;">
                  <label>De</label>
                  <input id="chartFrom" type="date" />
                </div>
                <div class="field" style="padding:0; min-width: 180px;">
                  <label>Até</label>
                  <input id="chartTo" type="date" />
                </div>
              </div>
              <button class="btn btn-secondary" id="applyChartFilterBtn" type="button" style="min-width: 180px;">Aplicar</button>
            </div>

            <div class="chart-wrap">
              <canvas id="opsChart" height="110"></canvas>
            </div>
          </div>
        </section>

        <section class="tabpanel" id="tab-ranking" style="display:none;">
          <div class="card">
            <div class="card-header">
              <div class="row space" style="align-items:center;">
                <h2>Ranking</h2>
                <div class="online-pill" id="onlinePill" style="display:none;">Online: <span id="onlineCount">0</span></div>
              </div>
              <p>Somatório do resultado por usuário</p>
            </div>

            <div class="ranking-meta">
              <div class="ranking-meta-header">
                <div class="ranking-meta-title">Meta do mês</div>
                <div class="ranking-meta-pct" id="rankingMetaPct">0%</div>
              </div>
              <div class="ranking-meta-bar">
                <div id="rankingMetaBar" style="width:0%"></div>
              </div>

              <div class="ranking-kpis">
                <div class="ranking-kpi">
                  <div class="muted">Alcançado</div>
                  <div class="kpi-value" id="rankingAchievedMonthly">-</div>
                </div>
                <div class="ranking-kpi">
                  <div class="muted">Restante</div>
                  <div class="kpi-value" id="rankingRemainingMonthly">-</div>
                </div>

                <div class="ranking-kpi">
                  <div class="muted">Meta Diária</div>
                  <div class="kpi-value" id="rankingGoalDaily">-</div>
                </div>
              </div>
            </div>

            <div class="ranking-controls">
              <div class="ranking-filters">
                <div class="field" style="padding:0; min-width: 120px;">
                  <label>Ano</label>
                  <select id="rankingYear" class="select"></select>
                </div>
                <div class="field" style="padding:0; min-width: 160px;">
                  <label>Mês</label>
                  <select id="rankingMonth" class="select"></select>
                </div>
                <div class="field" style="padding:0; min-width: 160px;">
                  <label>Dia</label>
                  <select id="rankingDay" class="select"></select>
                </div>
              </div>

              <div class="prize-spotlight" id="prizeSpotlight" style="display:none;">
                <div class="prize-spotlight-top">
                  <div class="prize-spotlight-badge"><i class="fa-solid fa-gift"></i></div>
                  <div>
                    <div class="prize-spotlight-title">Premiação do mês</div>
                    <div class="prize-spotlight-sub">Top 1 leva esse prêmio</div>
                  </div>
                </div>
                <div class="prize-spotlight-body">
                  <img id="prizeSpotlightImg" alt="premio" style="display:none;" />
                  <div class="prize-spotlight-name" id="prizeSpotlightName">-</div>
                </div>

                <div class="prize-winner" id="prizeWinner" style="display:none;">
                  <div class="muted">Ganhador do mês</div>
                  <div class="prize-winner-row">
                    <img id="prizeWinnerAvatar" alt="avatar" style="display:none;" />
                    <div class="prize-winner-name" id="prizeWinnerName">-</div>
                  </div>
                </div>

                <div class="prize-admin" id="prizeAdmin" style="display:none;">
                  <div class="grid2" style="gap: 10px;">
                    <div class="field" style="padding:0;">
                      <label>Prêmio (mês filtrado)</label>
                      <input id="prizeAdminName" type="text" placeholder="Ex: iPhone 13" />
                    </div>
                    <div class="field" style="padding:0;">
                      <label>Imagem (URL opcional)</label>
                      <input id="prizeAdminImage" type="text" placeholder="https://..." />
                    </div>
                  </div>
                  <button class="btn btn-secondary" id="saveMonthlyPrizeBtn" type="button" style="width: 100%; margin-top: 10px;">Salvar prêmio deste mês</button>
                </div>

                <button class="btn btn-secondary" id="saveMonthlyAwardBtn" type="button" style="display:none; width: 100%; margin-top: 10px;">Salvar vencedor deste mês</button>
              </div>
            </div>

            <div class="ranking-list" id="rankingList"></div>
          </div>
        </section>

        <section class="tabpanel" id="tab-central" style="display:none;">
          <div class="card">
            <div class="card-header">
              <h2>Central de recursos</h2>
              <p>Links e materiais úteis</p>
            </div>

            <div class="central-subnav" id="centralSubnav" style="padding: 0 16px 12px 16px;">
              <button class="btn btn-ghost active" type="button" data-central-tab="criativos">Criativos</button>
              <button class="btn btn-ghost" type="button" data-central-tab="proxy">Proxy</button>
              <button class="btn btn-ghost" type="button" data-central-tab="gerador">Gerador de dados</button>
            </div>

            <div class="central-panels" style="padding: 0 16px 16px 16px;">
              <div class="central-panel" id="central-criativos">
                <div class="card" style="margin:0;">
                  <div class="card-header">
                    <h2>Criativos</h2>
                    <p>Gerencie tokens compartilhados globalmente</p>
                  </div>

                  <div style="padding: 0 16px 14px 16px;">
                    <div class="grid2" style="margin-bottom: 10px;">
                      <div class="field" style="padding:0;">
                        <label>Status (global)</label>
                        <input id="creativeStatusName" type="text" placeholder="Ex: Disponível" />
                      </div>
                      <div class="field" style="padding:0;">
                        <label>Cor</label>
                        <input id="creativeStatusColor" type="color" value="#22c55e" style="height: 42px;" />
                      </div>
                    </div>

                    <div class="row space" style="margin-bottom: 12px;">
                      <div class="row" style="gap: 10px;">
                        <button class="btn btn-ghost" id="creativeStatusSaveBtn" type="button">Salvar status</button>
                        <button class="btn btn-ghost" id="creativeStatusClearBtn" type="button">Limpar</button>
                      </div>
                      <div class="muted" id="creativeStatusHint"></div>
                    </div>

                    <input id="creativeStatusEditingId" type="hidden" value="" />
                    <div class="table" id="creativeStatusesList" style="margin-bottom: 14px;"></div>

                    <div class="field" style="padding:0;">
                      <label>Token do criativo</label>
                      <input id="creativeToken" type="text" placeholder="#OXxXvYWAdRcP6vRbLtjcrL2s2Y78SOc+yYJurg6TSPzsgbLUdplpSQQxfjdzoCk=" />
                    </div>

                    <div class="grid2" style="margin-top: 10px;">
                      <div class="field" style="padding:0;">
                        <label>Status</label>
                        <select id="creativeStatus" class="select"></select>
                      </div>
                      <div class="field" style="padding:0;">
                        <label>Descrição (opcional)</label>
                        <input id="creativeDesc" type="text" placeholder="Opcional" />
                      </div>
                    </div>

                    <div class="row space" style="margin-top: 12px;">
                      <div class="row" style="gap: 10px;">
                        <button class="btn btn-secondary" id="creativeSaveBtn" type="button">Salvar</button>
                        <button class="btn btn-ghost" id="creativeClearBtn" type="button">Limpar</button>
                      </div>
                      <div class="muted" id="creativeHint"></div>
                    </div>

                    <input id="creativeEditingId" type="hidden" value="" />
                  </div>

                  <div class="table" id="creativesList" style="padding: 0 16px 16px 16px;"></div>
                </div>
              </div>
              <div class="central-panel" id="central-proxy" style="display:none;">
                <div class="card" style="margin:0;">
                  <div class="card-header">
                    <h2>Proxy</h2>
                    <p>Salve e compartilhe proxies (todos podem ver e editar)</p>
                  </div>

                  <div style="padding: 0 16px 14px 16px;">
                    <div class="grid2" style="margin-bottom: 10px;">
                      <div class="field" style="padding:0;">
                        <label>Nome</label>
                        <input id="proxyName" type="text" placeholder="Ex: Proxy 01" />
                      </div>
                      <div class="field" style="padding:0;">
                        <label>Proxy</label>
                        <input id="proxyValue" type="text" placeholder="ip:porta:user:senha" />
                      </div>
                    </div>

                    <div class="row space" style="margin-bottom: 12px;">
                      <div class="row" style="gap: 10px;">
                        <button class="btn btn-secondary" id="proxySaveBtn" type="button">Salvar</button>
                        <button class="btn btn-ghost" id="proxyClearBtn" type="button">Limpar</button>
                      </div>
                      <div class="muted" id="proxyHint"></div>
                    </div>

                    <input id="proxyEditingId" type="hidden" value="" />
                    <div class="table" id="proxiesList" style="margin-bottom: 14px;"></div>
                  </div>
                </div>
              </div>
              <div class="central-panel" id="central-gerador" style="display:none;">
                <div class="card" style="margin:0;">
                  <div class="card-header">
                    <h2>Gerador de dados</h2>
                    <p>Gera dados para testes: nome, CPF, email e endereço (CEP + rua + bairro)</p>
                  </div>

                  <div style="padding: 0 16px 14px 16px;">
                    <div class="row space" style="margin-bottom: 12px; align-items: flex-end; flex-wrap: wrap;">
                      <div class="field" style="padding:0; min-width: 160px;">
                        <label>Quantidade</label>
                        <input id="genQty" type="number" min="1" max="50" step="1" value="2" />
                      </div>
                      <div class="row" style="gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" id="genBtn" type="button">Gerar</button>
                        <button class="btn btn-ghost" id="genExportBtn" type="button">Exportar</button>
                        <button class="btn" id="genResetBtn" type="button">Resetar</button>
                      </div>
                    </div>

                    <div class="row space" style="margin-bottom: 10px;">
                      <div class="muted" id="genHint"></div>
                    </div>

                    <div class="table" id="dataGenTable" style="margin-bottom: 14px;"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="tabpanel" id="tab-expenses" style="display:none;">
          <div class="card">
            <div class="card-header">
              <div class="row space" style="align-items: flex-end; flex-wrap: wrap;">
                <div>
                  <h2>Gastos</h2>
                  <p>Registre e gerencie seus gastos pessoais</p>
                </div>
                <button class="btn btn-secondary" id="exportExpensesCsvBtn" type="button">Exportar CSV</button>
              </div>
            </div>

            <div class="grid4" style="padding: 0 16px 16px 16px;">
              <div class="kpi">
                <div class="muted">Total no mês</div>
                <div class="kpi-value" id="expKpiTotal">R$ 0,00</div>
              </div>
              <div class="kpi">
                <div class="muted">Média diária</div>
                <div class="kpi-value" id="expKpiDailyAvg">R$ 0,00</div>
              </div>
              <div class="kpi">
                <div class="muted">Maior gasto</div>
                <div class="kpi-value" id="expKpiMax">R$ 0,00</div>
              </div>
              <div class="kpi">
                <div class="muted">Categoria top</div>
                <div class="kpi-value" id="expKpiTopCat">-</div>
              </div>
            </div>

            <div class="card" style="margin: 0 16px 16px 16px;">
              <div class="card-header">
                <h3>Filtros e busca</h3>
              </div>
              <div class="row" style="gap: 10px; flex-wrap: wrap; padding: 0 16px 16px 16px; align-items: flex-end;">
                <div class="field" style="padding:0; min-width: 220px;">
                  <label>Buscar</label>
                  <input id="expSearch" type="text" placeholder="Buscar por descrição" />
                </div>
                <div class="field" style="padding:0; min-width: 160px;">
                  <label>Período</label>
                  <select id="expPeriod" class="select">
                    <option value="month">Este mês</option>
                    <option value="custom">Personalizado</option>
                  </select>
                </div>
                <div class="field" style="padding:0; min-width: 180px;">
                  <label>Data inicial</label>
                  <input id="expFrom" type="date" />
                </div>
                <div class="field" style="padding:0; min-width: 180px;">
                  <label>Data final</label>
                  <input id="expTo" type="date" />
                </div>
                <div class="field" style="padding:0; min-width: 200px;">
                  <label>Categoria</label>
                  <select id="expCategory" class="select"></select>
                </div>
                <div class="field" style="padding:0; min-width: 200px;">
                  <label>Ordenar por</label>
                  <select id="expOrder" class="select">
                    <option value="date_desc">Data (mais recente)</option>
                    <option value="date_asc">Data (mais antiga)</option>
                    <option value="value_desc">Valor (maior)</option>
                    <option value="value_asc">Valor (menor)</option>
                  </select>
                </div>
                <div class="field" style="padding:0;">
                  <label>&nbsp;</label>
                  <button class="btn btn-primary" id="applyExpensesFilterBtn" type="button">Aplicar</button>
                </div>
              </div>
            </div>

            <div class="grid2" style="padding: 0 16px 16px 16px;">
              <div class="card">
                <div class="card-header">
                  <h3>Adicionar / Editar gasto</h3>
                </div>
                <div class="grid2" style="padding: 0 16px 16px 16px;">
                  <input id="expEditingId" type="hidden" />
                  <div class="field">
                    <label>Data</label>
                    <input id="expDate" type="date" />
                  </div>
                  <div class="field">
                    <label>Valor (R$)</label>
                    <input id="expValue" type="number" step="0.01" placeholder="0.00" />
                  </div>
                </div>
                <div class="grid2" style="padding: 0 16px 16px 16px;">
                  <div class="field">
                    <label>Categoria</label>
                    <select id="expCategoryForm" class="select"></select>
                  </div>
                  <div class="field">
                    <label>Descrição</label>
                    <input id="expDesc" type="text" placeholder="Ex: mercado" />
                  </div>
                </div>
                <div class="row" style="padding: 0 16px 16px 16px; justify-content: space-between; flex-wrap: wrap;">
                  <div class="row">
                    <button class="btn btn-primary" id="saveExpenseBtn" type="button">Salvar</button>
                    <button class="btn btn-ghost" id="clearExpenseBtn" type="button">Limpar</button>
                  </div>
                  <div class="muted" id="expFormHint"></div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <h3>Visualizações</h3>
                </div>
                <div style="padding: 0 16px 16px 16px;">
                  <div class="muted" style="padding-bottom: 10px;">Gastos por categoria</div>
                  <canvas id="expByCategoryChart" height="160"></canvas>
                </div>
              </div>
            </div>

            <div class="card" style="margin: 0 16px 16px 16px;">
              <div class="card-header">
                <h3>Gastos</h3>
              </div>
              <div class="table" id="expensesTable"></div>
              <div class="alert" id="expensesAlert" style="display:none; margin: 0 16px 16px 16px;"></div>
            </div>
          </div>
        </section>

        <section class="tabpanel" id="tab-profile" style="display:none;">
          <div class="card">
            <div class="card-header">
              <h2>Perfil</h2>
              <p>Configurações da sua conta</p>
            </div>

            <div class="grid2">
              <div class="field">
                <label>Username</label>
                <input id="profileUsername" type="text" placeholder="seu_username" />
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label>Meta mensal (R$)</label>
                <input id="profileMonthlyGoal" type="number" step="0.01" placeholder="0.00" />
              </div>
              <div class="field">
                <label>&nbsp;</label>
                <div class="muted">Aparece no Ranking Mensal com barra de progresso</div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label>Novo email</label>
                <input id="profileEmail" type="email" placeholder="seuemail@exemplo.com" autocomplete="email" />
              </div>
              <div class="field">
                <label>Nova senha</label>
                <input id="profilePassword" type="password" placeholder="******" autocomplete="new-password" />
              </div>
            </div>

            <div class="field">
              <label>Avatar</label>
              <div class="row" style="justify-content: space-between; align-items: center;">
                <div class="muted">Clique para trocar</div>
                <button class="btn btn-secondary" id="toggleAvatarBtn" type="button">Trocar avatar</button>
              </div>

              <div class="row" style="justify-content: space-between; align-items: center; padding-top: 10px;">
                <input id="avatarFile" type="file" accept="image/*" />
                <button class="btn btn-secondary" id="uploadAvatarBtn" type="button">Usar foto</button>
              </div>

              <div class="avatar-grid" id="avatarGrid" style="display:none;"></div>
            </div>

            <div class="row space">
              <div class="row">
                <button class="btn btn-secondary" id="saveProfileBtn" type="button">Salvar Perfil</button>
                <button class="btn btn-ghost" id="logoutBtn" type="button">Sair</button>
              </div>
              <div class="muted" id="profileHint"></div>
            </div>
          </div>
        </section>

        <section class="tabpanel" id="tab-admin" style="display:none;">
          <div class="card">
            <div class="card-header">
              <h2>Admin</h2>
              <p>Gerencie permissões e configurações</p>
            </div>

            <div class="grid2">
              <div class="field">
                <label>Premiação do Top 1 do mês</label>
                <input id="monthlyRewardInput" type="text" placeholder="Ex: Pix de R$ 50" />
              </div>
              <div class="field">
                <label>&nbsp;</label>
                <button class="btn btn-secondary" id="saveMonthlyRewardBtn" type="button">Salvar premiação</button>
              </div>
            </div>
          </div>1
1
          <div class="card" style="margin-top: 16px;">
            <div class="card-header">
              <h2>Usuários</h2>
              <p>Criar, editar e gerenciar usuários (somente admin)</p>
            </div>

            <div class="grid2" style="padding: 0 16px 16px 16px;">
              <input id="adminUserEditingId" type="hidden" />
              <div class="field">
                <label>Email</label>
                <input id="adminUserEmail" type="email" placeholder="novo@exemplo.com" autocomplete="off" />
              </div>
              <div class="field">
                <label>Senha (opcional)</label>
                <input id="adminUserPassword" type="password" placeholder="Definir/alterar senha" autocomplete="off" />
              </div>
            </div>

            <div class="row" style="padding: 0 16px 16px 16px; justify-content: space-between; flex-wrap: wrap;">
              <label class="row" style="gap: 8px;">
                <input id="adminUserIsAdmin" type="checkbox" />
                <span class="muted">Admin</span>
              </label>
              <div class="row" style="gap: 10px; flex-wrap: wrap;">
                <button class="btn btn-primary" id="adminUserSaveBtn" type="button">Salvar usuário</button>
                <button class="btn btn-secondary" id="adminUserClearBtn" type="button">Limpar</button>
                <button class="btn" id="adminUsersRefreshBtn" type="button">Atualizar lista</button>
              </div>
            </div>

            <div class="table" id="adminUsersList"></div>
            <div class="alert" id="adminUsersHint" style="display:none; margin: 0 16px 16px 16px;"></div>
          </div>
        </section>
          </section>
        </div>
      </section>
    </main>
  </div>

  <script src="/charts.js?v=20260211_20"></script>
  <script src="/app.js?v=20260211_20"></script>

  <div class="modal-backdrop" id="uiModal" style="display:none;">
    <div class="modal">
      <div class="modal-icon" id="uiModalIcon"></div>
      <div class="modal-title" id="uiModalTitle"></div>
      <div class="modal-text" id="uiModalText"></div>
      <div class="modal-actions">
        <button class="btn btn-ghost" id="uiModalCancel" type="button">Cancelar</button>
        <button class="btn btn-primary" id="uiModalConfirm" type="button">Confirmar</button>
      </div>
    </div>
  </div>

  <div class="toast-stack" id="uiToasts"></div>
</body>
</html>